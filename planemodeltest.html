<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>airplane</title>


    <style>
        body{
            margin: 0;
        }
        canvas{
            width: 100%;
            height: 100%;
        }
    </style>

</head>
<body>
<script src="three/build/three.js" type="text/javascript"></script>
<script src="three/examples/js/controls/OrbitControls.js"></script>
<script src="physi.js"></script>
<script>
//set a scene
    var scene = new Physijs.Scene();

    //set a camera
    var camera = new THREE.PerspectiveCamera(20, window.innerWidth/ window.innerHeight, 0.1, 200);
    camera.position.set(0, 10, 35);

    scene.background = new THREE.Color('rgb(230,218,218)');
    scene.fog = new THREE.Fog('rgb(230,218,218)', 10, 100);
    scene.setGravity(new THREE.Vector3(0, -30, 0));

    //set a render
    var renderer = new THREE.WebGLRenderer({alpha:true, antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);


    // //geometry
    // var geometry = new THREE.BoxGeometry(2,0.03,2);
    // //change the material here
    // var material = new THREE.MeshLambertMaterial({color: 0xff3300});
    // var cube = new THREE.Mesh(geometry, material); //create the cube with var geometry and material
    //
    // geometry.vertices[0].z-=1;
    // geometry.vertices[2].z-=1;
    // geometry.vertices[1].z+=1;
    // geometry.vertices[3].z+=1;
    // geometry.vertices[5].z-=1.3;
    // geometry.vertices[7].z-=1.3;
    //
    // var geometry1 = new THREE.BoxGeometry(2,0.03,2);
    // var material1 = new THREE.MeshLambertMaterial({color: 0xff6600});
    // var cu1 = new THREE.Mesh(geometry1, material1);
    //
    // geometry1.vertices[0].z-=1;
    // geometry1.vertices[2].z-=1;
    // geometry1.vertices[1].z+=1;
    // geometry1.vertices[3].z+=1;
    //
    // geometry1.vertices[4].z+=0.7;
    // geometry1.vertices[6].z+=0.7;
    //
    // geometry1.vertices[5].y-=0.3;
    // geometry1.vertices[7].y-=0.3;
    //
    // geometry1.vertices[5].z-=1;
    // geometry1.vertices[7].z-=1;
    //
    // var geometry2 = new THREE.BoxGeometry(2,0.03,2);
    // var material2 = new THREE.MeshLambertMaterial({color: 0xff8800});
    // var cu2 = new THREE.Mesh(geometry2, material2);
    //
    // geometry2.vertices[0].z-=1;
    // geometry2.vertices[2].z-=1;
    // geometry2.vertices[1].z+=1;
    // geometry2.vertices[3].z+=1;
    // geometry2.vertices[4].z+=1.3;
    // geometry2.vertices[6].z+=1.3;
    //
    //
    // var geometry3 = new THREE.BoxGeometry(2,0.03,2);
    // var material3 = new THREE.MeshLambertMaterial({color: 0xff2200});
    // var cu3 = new THREE.Mesh(geometry3, material3);
    //
    // geometry3.vertices[0].z-=1;
    // geometry3.vertices[2].z-=1;
    // geometry3.vertices[1].z+=1;
    // geometry3.vertices[3].z+=1;
    //
    // geometry3.vertices[5].z-=0.7;
    // geometry3.vertices[7].z-=0.7;
    // //
    // geometry3.vertices[4].y-=0.3;
    // geometry3.vertices[6].y-=0.3;
    // //
    // geometry3.vertices[4].z+=1;
    // geometry3.vertices[6].z+=1;
    //
    //
    //
    // scene.add(cu1);
    // scene.add(cu2);
    // scene.add(cu3);
    // scene.add(cube); //add the cube into scene
    // cube.castShadow = true; //you have to label shadow on things need shadow
//plane
    var mesh = new Physijs.PlaneMesh(new THREE.PlaneGeometry(200, 200), Physijs.createMaterial(new THREE.MeshPhongMaterial({color: 'rgb(39, 64, 70)', depthWrite: false})));
    mesh.rotation.x = -Math.PI / 2;
    mesh.position.y = -1.5;
    mesh.receiveShadow = true;
    scene.add(mesh);

//create a plane
    var plane1 = new THREE.BoxGeometry(2,0.03,2);
    plane1.vertices[0].z-=1;
    plane1.vertices[2].z-=1;
    plane1.vertices[1].z+=1;
    plane1.vertices[3].z+=1;
    plane1.vertices[5].z-=1.3;
    plane1.vertices[7].z-=1.3;

    var plane2 = new THREE.BoxGeometry(2,0.03,2);

    plane2.vertices[0].z-=1;
    plane2.vertices[2].z-=1;
    plane2.vertices[1].z+=1;
    plane2.vertices[3].z+=1;
    plane2.vertices[4].z+=0.7;
    plane2.vertices[6].z+=0.7;
    plane2.vertices[5].y-=0.3;
    plane2.vertices[7].y-=0.3;
    plane2.vertices[5].z-=1;
    plane2.vertices[7].z-=1;

    var plane3 = new THREE.BoxGeometry(2,0.03,2);

    plane3.vertices[0].z-=1;
    plane3.vertices[2].z-=1;
    plane3.vertices[1].z+=1;
    plane3.vertices[3].z+=1;
    plane3.vertices[4].z+=1.3;
    plane3.vertices[6].z+=1.3;


    var plane4 = new THREE.BoxGeometry(2,0.03,2);

    plane4.vertices[0].z-=1;
    plane4.vertices[2].z-=1;
    plane4.vertices[1].z+=1;
    plane4.vertices[3].z+=1;
    plane4.vertices[5].z-=0.7;
    plane4.vertices[7].z-=0.7;
    plane4.vertices[4].y-=0.3;
    plane4.vertices[6].y-=0.3;
    plane4.vertices[4].z+=1;
    plane4.vertices[6].z+=1;


    var planeGeometry = new THREE.Geometry();
    var planeMesh1 = new THREE.Mesh(plane1);
    var planeMesh2 = new THREE.Mesh(plane2);
    var planeMesh3 = new THREE.Mesh(plane3);
    var planeMesh4 = new THREE.Mesh(plane4);

    planeMesh1.updateMatrix();
    planeGeometry.merge(planeMesh1.geometry,planeMesh1.matrix);
    planeMesh2.updateMatrix();
    planeGeometry.merge(planeMesh2.geometry,planeMesh2.matrix);
    planeMesh3.updateMatrix();
    planeGeometry.merge(planeMesh3.geometry,planeMesh3.matrix);
    planeMesh4.updateMatrix();
    planeGeometry.merge(planeMesh4.geometry,planeMesh4.matrix);

    var material = new THREE.MeshLambertMaterial({color:'rgb(82, 172, 255)'});
var airplane = new THREE.Mesh(planeGeometry,material);



scene.add(airplane);

// for ( var i = 0; i < 30; i ++ ) {
//     var airplane = new THREE.Mesh(planeGeometry,material);
//
//     airplane.position.x = Math.random()*800 - 400;
//     airplane.position.y = Math.random()*800 - 400;
//     airplane.position.z = Math.random()*800 - 400;
//     airplane.rotation.x = Math.random() * 2 * Math.PI;
//     airplane.rotation.y = Math.random() * 2 * Math.PI;
//     airplane.rotation.z = Math.random() * 2 * Math.PI;
//     airplane.scale.x = Math.random() + 0.5;
//     airplane.scale.y = Math.random() + 0.5;
//     airplane.scale.z = Math.random() + 0.5;
//     scene.add(airplane);
// }
    //add the cube into scene
   airplane.castShadow = true; //you have to label shadow on things need shadow
airplane.receiveShadow = true;



    //add spotlight
var spotLight = new THREE.AmbientLight(0x444444);//set a spotlight with color
var light = new THREE.DirectionalLight(0xffffff);
light.position.set(-1, 3, 4);

light.castShadow = true;
light.shadow.camera.top = 10;
light.shadow.camera.bottom = -10;
light.shadow.camera.left = -10;
light.shadow.camera.right = 10;
spotLight.castShadow = true;

hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );
hemiLight.color.setHSL( 0.6, 1, 0.6 );
hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );
hemiLight.position.set( 0, 50, 0 );
scene.add( hemiLight );
hemiLightHelper = new THREE.HemisphereLightHelper( hemiLight, 10 );
scene.add( hemiLightHelper );

scene.add(spotLight);//add it into scene(always do it)
scene.add(light);
    //set the camera position 数字越大图形越远（小）
light.castShadow = true;
    //set the animation of cube

   var controls = new THREE.OrbitControls(camera, renderer.domElement);
    //设置控制器的中心点
    //controls.target.set( 0, 100, 0 );
    // 如果使用animate方法时，将此函数删除
    //controls.addEventListener( 'change', render );
    // 使动画循环使用时阻尼或自转 意思是否有惯性
    controls.enableDamping = true;
    //动态阻尼系数 就是鼠标拖拽旋转灵敏度
    //controls.dampingFactor = 0.25;
    //是否可以缩放
    controls.enableZoom = true;
    //是否自动旋转
    controls.autoRotate = false;
    controls.autoRotateSpeed = 0.5;
    //设置相机距离原点的最远距离
    controls.minDistance = 1;
    //设置相机距离原点的最远距离
    controls.maxDistance = 100;
    //是否开启右键拖拽
    controls.enablePan = true;



    var render = function () {
        requestAnimationFrame(render);
        // cube.rotation.z += 0.01;
        // cube.rotation.y += 0.01;
        renderer.render(scene,camera);
    };
    render();
</script>
</body>
</html>